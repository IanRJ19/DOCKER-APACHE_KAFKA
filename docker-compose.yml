version: '3.8'

services:
  zookeeper:
    build: 
      context: .
      dockerfile: Dockerfile-zookeeper
    ports:
      - 2181:2181
      - 2888:2888
      - 3888:3888
    environment:
      - KAFKA_USER_HOME=/usr/local/kafka
    volumes:
      - apache-zookeeper-3.8.1-bin:/usr/local/kafka  # replace with the actual directory
    restart: always

  kafka:
    build: 
      context: .
      dockerfile: Dockerfile-kafka
    ports:
      - 9092:9092
    environment:
      - KAFKA_USER_HOME=/usr/local/kafka
    volumes:
      - kafka_2.13-3.5.0:/usr/local/kafka  # replace with the actual directory
    depends_on:
      - zookeeper
    restart: always
